Данные рекомендации по обновлению рассчитаны на пользователей BPMSoft версии 1.1 и выше. Все описанные ниже действия по обновлению продукта пользователь производит самостоятельно согласно [правилам](https://samarasoft.com/support/).

С обзором изменений и улучшений, реализованных в 1С Коннектор для BPMSoft, вы можете ознакомиться в описании релизов.

**_После обновления продукта пользователю необходимо проверить все настройки интеграции и установить признак [Использовать для дедупликации] для каждого объекта интеграции, если признак не будет установлен, то в системе будут дубли, т.к. изменена структура хранения записи в таблице соответствий SmrSyncHistory._**

Прежде чем приступить к обновлению, перейдите в раздел [Конфигурация] и выполните последовательно действия [Сгенерировать исходный код для всех элементов] и [Компилировать все]. Если в результате выполнения этих действий возникнут ошибки, их необходимо исправить, и только после этого начинать процедуру обновления.

Обновление версии продукта рекомендуем проводить в 2 этапа:

1. Сначала выполните обновление продукта на тестовом сайте с копией актуальной базы данных.
2. Если первый этап завершился успешно, то обновите версию продукта на продуктивной (production) версии приложения.

**_Примечание:_** _Обновление версии продукта рекомендуем проводить не в бизнес-время, так как при этом сайт будет недоступен._

В общем случает процесс обновления состоит из следующих шагов:

1. Создайте копию базы данных продуктивного сайта, которая понадобится для разворачивания тестового сайта.
2. Создайте тестовый сайт в IIS.
3. Установите обновленный пакет продукта на тестовый сайт.
    1. Для установки пакетов перейдите в [Дизайнер системы] и выберите [Установка и удаление приложений].
    2. На странице [Установка и удаление приложений] нажмите [Установить из файла], укажите предоставленный архив.  
        **_Примечание:  
        _**_Обновление пакета занимает около 10 минут._
4. Создайте копию базы данных системы 1С. Понадобится для возврата на рабочую версию в случае неполадок. Рекомендуем использовать подключение к тестовой 1С с копией актуальной базы данных. Настройка подключения к 1С подробно описана в [статье](https://samarasoft.com/docs/1c-connector/integration-setting-creatio/1%D1%81-connection-setting/).
5. Проверьте корректность работы тестового сайта:
    1. Очистите таблицу соответствий SmrSyncHistory в базе данных BPMSoft.
    2. Выполните запуск интеграции, если основные и часто используемые интеграции выполняются без ошибок, то можно приступить к обновлению пакета продукта на продуктивном сайте.
6.  Создайте копии базы данных системы BPMSoft и системы 1С. Они понадобятся для возврата на рабочую версию в случае неполадок.
7. Установите обновленный пакет продукта на продуктивную версию.
8. Проверьте корректность работы продуктивного сайта:
    1. Очистите таблицу соответствий SmrSyncHistory в базе данных BPMSoft.
    2. Выполните запуск интеграции, если основные и часто используемые интеграции выполняются без ошибок, то обновление прошло успешно. Если интеграции выполняются некорректно, необходимо восстановить рабочую версию систем (BPMSoft,1c) из бекапа

**_Примечание:_** _если система cloud, то необходимо написать в ТП Ланит запрос на предоставление тестовой среды с актуальной базой продуктивной системы. Для обновления_ 1С Коннектор для BPMSoft _на продуктивной системе необходимо написать в ТП Ланит для согласования плана обновления пакета продукта согласно рекомендациям выше._